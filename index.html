<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="theme-color" content="#312e81">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <title>ãŠè¦‹ç©ã‚Šã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ | ITãƒ©ã‚¤ãƒ•ãƒ¯ãƒ¼ã‚¯ãƒ‡ã‚¶ã‚¤ãƒ³</title>
  <meta name="description" content="é•·å´çœŒã‚’ä¸­å¿ƒã«æ´»å‹•ã™ã‚‹è¨ªå•ITã‚µãƒãƒ¼ãƒˆã®æ–™é‡‘ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼">
  
  <!-- PWAç”¨ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆ -->
  <link rel="manifest" href="manifest.json">
  
  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- React CDN -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  
  <style>
    /* ã‚«ã‚¹ã‚¿ãƒ ã‚¹ã‚¿ã‚¤ãƒ« */
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Hiragino Sans', 'Hiragino Kaku Gothic ProN', 'Yu Gothic', sans-serif;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }
    
    /* ã‚¹ãƒ ãƒ¼ã‚ºãªã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
    .active\:scale-98:active {
      transform: scale(0.98);
    }
    
    /* ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒãƒ¼éè¡¨ç¤º */
    ::-webkit-scrollbar {
      display: none;
    }
    
    /* ã‚¿ãƒƒãƒ—ãƒã‚¤ãƒ©ã‚¤ãƒˆç„¡åŠ¹åŒ– */
    * {
      -webkit-tap-highlight-color: transparent;
    }
  </style>
</head>
<body>
  <div id="root"></div>
  
  <script type="text/babel">
    const { useState, useEffect, useRef } = React;

    // ============================================
    // ä¾¡æ ¼ãƒ‡ãƒ¼ã‚¿ï¼ˆã“ã“ã‚’ç·¨é›†ã™ã‚Œã°ä¾¡æ ¼æ”¹å®šã§ãã¾ã™ï¼‰
    // ============================================
    const PRICE_DATA = {
      // å‡ºå¼µæ–™é‡‘
      travel: {
        bands: [
          { 
            id: 'band_0_20', 
            label: 'åŸºæœ¬ã‚¨ãƒªã‚¢ï¼ˆã€œ20kmï¼‰', 
            sublabel: 'é•·å´å¸‚ãƒ»æ™‚æ´¥ç”ºãƒ»é•·ä¸ç”ºãƒ»è¥¿æµ·å¸‚', 
            price: 4000,
            revisit: 2000 
          },
          { 
            id: 'band_30', 
            label: '30kmåœå†…', 
            sublabel: 'è««æ—©å¸‚', 
            price: 7000,
            revisit: 3500 
          },
          { 
            id: 'band_40_50', 
            label: '40ã€œ50kmåœå†…', 
            sublabel: 'å¤§æ‘å¸‚ãƒ»ä½ä¸–ä¿å¸‚ãƒ»æ±å½¼æµãƒ»å·æ£šãƒ»é›²ä»™ãƒ»å¬‰é‡ãƒ»æ³¢ä½è¦‹', 
            price: 8000,
            revisit: 4000 
          },
          { 
            id: 'band_55_over', 
            label: 'é æ–¹ã‚¨ãƒªã‚¢ï¼ˆ55kmã€œï¼‰', 
            sublabel: 'ä½ã€…ç”ºãƒ»å³¶åŸå¸‚ãƒ»å—å³¶åŸå¸‚ãƒ»é¹¿å³¶å¸‚', 
            price: 10000,
            revisit: 5000 
          },
        ],
      },

      // ãƒ‡ãƒã‚¤ã‚¹ã‚«ãƒ†ã‚´ãƒª
      devices: [
        { id: 'PC', label: 'ãƒ‘ã‚½ã‚³ãƒ³', icon: 'ğŸ’»' },
        { id: 'SP', label: 'ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³', icon: 'ğŸ“±' },
        { id: 'NW', label: 'ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ©Ÿå™¨', icon: 'ğŸŒ' },
        { id: 'PR', label: 'å‘¨è¾ºæ©Ÿå™¨', icon: 'ğŸ–¨ï¸' },
        { id: 'DATA', label: 'ãƒ‡ãƒ¼ã‚¿å¾©æ—§', icon: 'ğŸ’¾' },
        { id: 'OTHER', label: 'å…±é€šãƒ»ãã®ä»–', icon: 'ğŸ”§' },
      ],

      // ä½œæ¥­ãƒ¡ãƒ‹ãƒ¥ãƒ¼
      menu: {
        // ========== Troubleï¼ˆãƒˆãƒ©ãƒ–ãƒ«å¯¾å¿œï¼‰ ==========
        trouble: {
          PC: [
            { id: 'T_PC_HW_CHECK', label: 'å‹•ä½œãƒã‚§ãƒƒã‚¯ï¼ˆå¿…é ˆï¼‰', sublabel: 'åŸå› è¨ºæ–­', price: 6000, choiceGroup: 'PC_HW_CHECK', isSupported: true },
            { id: 'T_PC_HW_PARTS', label: 'ãƒ‘ãƒ¼ãƒ„äº¤æ›ã‚ã‚Š', sublabel: 'PCãŠé ã‹ã‚Šãƒ»å†è¨ªå•', price: 10000, choiceGroup: 'PC_HW_PARTS', isSupported: true, note: 'ãƒ‘ãƒ¼ãƒ„è²»ã¯åˆ¥é€”', requiresRevisit: true },
            { id: 'T_PC_HW_NO_PARTS', label: 'ãƒ‘ãƒ¼ãƒ„äº¤æ›ãªã—ã§å¾©æ—§', sublabel: 'æˆåŠŸå ±é…¬å‹', price: 8000, choiceGroup: 'PC_HW_PARTS', isSupported: true },
            { id: 'T_PC_SW_CHECK', label: 'ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢è¨ºæ–­', sublabel: 'å‹•ä½œãƒã‚§ãƒƒã‚¯', price: 6000, choiceGroup: 'PC_SW_CHECK', isSupported: true },
            { id: 'T_PC_SW_NO_PARTS_WITH_CHECK', label: 'ãƒ‘ãƒ¼ãƒ„äº¤æ›ãªã—', sublabel: 'å‹•ä½œãƒã‚§ãƒƒã‚¯å¿…è¦æ™‚', price: 8000, choiceGroup: 'PC_SW_BASE', isSupported: true },
            { id: 'T_PC_SW_NO_CHECK', label: 'å‹•ä½œãƒã‚§ãƒƒã‚¯ä¸è¦', sublabel: 'ãƒ‘ãƒ¼ãƒ„äº¤æ›ãªã—', price: 8000, choiceGroup: 'PC_SW_BASE', isSupported: true },
          ],
          SP: [
            { id: 'T_SP_HW_UNSUPPORTED', label: 'ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ä¿®ç†', sublabel: 'ã‚¹ãƒãƒ›æœ¬ä½“', price: 0, choiceGroup: 'SP_HW', isSupported: false },
            { id: 'T_SP_SW_APP_1', label: 'ã‚¢ãƒ—ãƒªè¨­å®šï¼ˆ1ä»¶ï¼‰', sublabel: 'ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒ»åˆæœŸè¨­å®š', price: 4000, choiceGroup: 'SP_APP_COUNT', isSupported: true },
            { id: 'T_SP_SW_APP_2', label: 'ã‚¢ãƒ—ãƒªè¨­å®šï¼ˆ2ä»¶ï¼‰', sublabel: 'ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒ»åˆæœŸè¨­å®š', price: 8000, choiceGroup: 'SP_APP_COUNT', isSupported: true },
            { id: 'T_SP_SW_APP_3', label: 'ã‚¢ãƒ—ãƒªè¨­å®šï¼ˆ3ä»¶ï¼‰', sublabel: 'ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒ»åˆæœŸè¨­å®š', price: 12000, choiceGroup: 'SP_APP_COUNT', isSupported: true },
            { id: 'T_SP_SW_OS_INIT', label: 'OSåˆæœŸåŒ–', sublabel: 'ãƒªã‚»ãƒƒãƒˆãƒ»å†è¨­å®š', price: 8000, choiceGroup: 'SP_OS', isSupported: true },
            { id: 'T_SP_SW_MIGRATE', label: 'ãƒ‡ãƒ¼ã‚¿ç§»è¡Œ', sublabel: 'ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãƒ»ãƒ‡ãƒ¼ã‚¿å¼•ç¶™ã', price: 10000, choiceGroup: 'SP_MIGRATE', isSupported: true },
          ],
          NW: [
            { id: 'T_NW_CHECK', label: 'å‹•ä½œãƒã‚§ãƒƒã‚¯', sublabel: 'ãƒ«ãƒ¼ã‚¿ãƒ¼è¨ºæ–­', price: 6000, choiceGroup: 'NW_CHECK', isSupported: true },
            { id: 'T_NW_HW_UNSUPPORTED', label: 'ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ä¿®ç†', sublabel: 'ãƒ«ãƒ¼ã‚¿ãƒ¼æœ¬ä½“', price: 0, choiceGroup: 'NW_HW', isSupported: false },
            { id: 'T_NW_SW_RESET', label: 'å†è¨­å®šä½œæ¥­', sublabel: 'Wi-Fiãƒ»ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆå¾©æ—§', price: 10000, choiceGroup: 'NW_SW_RESET', isSupported: true },
          ],
          PR: [
            { id: 'T_PR_HW_CHECK', label: 'å‹•ä½œãƒã‚§ãƒƒã‚¯', sublabel: 'ãƒ—ãƒªãƒ³ã‚¿ç­‰è¨ºæ–­', price: 6000, choiceGroup: 'PR_HW_CHECK', isSupported: true },
            { id: 'T_PR_HW_BASE', label: 'ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ä¿®å¾©', sublabel: 'åŸºæœ¬ä½œæ¥­', price: 6000, choiceGroup: 'PR_HW_BASE', isSupported: true },
            { id: 'T_PR_SW_CONNECT', label: 'ãƒ‡ãƒã‚¤ã‚¹æ¥ç¶š', sublabel: 'PCãƒ»ã‚¹ãƒãƒ›ã¨ã®æ¥ç¶š', price: 6000, choiceGroup: 'PR_SW_CONNECT', isSupported: true },
            { id: 'T_PR_SW_DRIVER', label: 'ãƒ‰ãƒ©ã‚¤ãƒå†ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«', sublabel: 'ãƒ‰ãƒ©ã‚¤ãƒä¿®å¾©', price: 6000, choiceGroup: 'PR_SW_DRIVER', isSupported: true },
          ],
          DATA: [
            { id: 'T_DATA_INSPECT', label: 'å–ã‚Šå‡ºã—æ¤œæŸ»ï¼ˆå¿…é ˆï¼‰', sublabel: 'çŠ¶æ…‹ç¢ºèªãƒ»è¦‹ç©', price: 3000, choiceGroup: 'DATA_INSPECTION', isSupported: true, isRequired: true },
            { id: 'T_DATA_REC_0_50', label: 'ãƒ‡ãƒ¼ã‚¿å¾©æ—§ 0ã€œ50GB', sublabel: 'PCãŠé ã‹ã‚Š', price: 25000, choiceGroup: 'DATA_REC_GB', isSupported: true, note: '+æ¤œæŸ»3,000å††', requiresRevisit: true },
            { id: 'T_DATA_REC_50_100', label: 'ãƒ‡ãƒ¼ã‚¿å¾©æ—§ 50ã€œ100GB', sublabel: 'PCãŠé ã‹ã‚Š', price: 45000, choiceGroup: 'DATA_REC_GB', isSupported: true, note: '+æ¤œæŸ»3,000å††', requiresRevisit: true },
            { id: 'T_DATA_REC_100_200', label: 'ãƒ‡ãƒ¼ã‚¿å¾©æ—§ 100ã€œ200GB', sublabel: 'PCãŠé ã‹ã‚Š', price: 65000, choiceGroup: 'DATA_REC_GB', isSupported: true, note: '+æ¤œæŸ»3,000å††', requiresRevisit: true },
          ],
          OTHER: [],
        },

        // ========== NotTroubleï¼ˆé€šå¸¸ä½œæ¥­ï¼‰ ==========
        notTrouble: {
          PC: [
            { id: 'N_PC_SETUP', label: 'åˆæœŸè¨­å®š', sublabel: 'æ–°è¦ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—', price: 6000, choiceGroup: 'PC_SETUP', isSupported: true },
            { id: 'N_PC_RECOVER', label: 'ãƒªã‚«ãƒãƒªï¼ˆåˆæœŸåŒ–ï¼‰', sublabel: 'OSå†ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«', price: 6000, choiceGroup: 'PC_SETUP_AFTER_RECOVERY', isSupported: true },
            { id: 'N_PC_INSTALL_1', label: 'ã‚½ãƒ•ãƒˆã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆ1ä»¶ï¼‰', sublabel: 'ã‚¢ãƒ—ãƒªå°å…¥', price: 6000, choiceGroup: 'PC_INSTALL_COUNT', isSupported: true },
            { id: 'N_PC_INSTALL_2', label: 'ã‚½ãƒ•ãƒˆã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆ2ä»¶ï¼‰', sublabel: 'ã‚¢ãƒ—ãƒªå°å…¥', price: 6000, choiceGroup: 'PC_INSTALL_COUNT', isSupported: true },
            { id: 'N_PC_INSTALL_3', label: 'ã‚½ãƒ•ãƒˆã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆ3ä»¶ï¼‰', sublabel: 'ã‚¢ãƒ—ãƒªå°å…¥', price: 6000, choiceGroup: 'PC_INSTALL_COUNT', isSupported: true },
            { id: 'N_PC_SSD_SW', label: 'SSDæ›è£…', sublabel: 'ãƒ‘ãƒ¼ãƒ„äº¤æ›', price: 15000, choiceGroup: 'PC_SSD', isSupported: true, note: 'SSDè²»ç”¨ã¯åˆ¥é€”' },
          ],
          SP: [
            { id: 'N_SP_SELECT', label: 'å•†å“é¸å®š', sublabel: 'æ©Ÿç¨®é¸ã³ã‚µãƒãƒ¼ãƒˆ', price: 6000, choiceGroup: 'SELECT_PROD', isSupported: true, note: 'æ‰±ã„ãªã„å ´åˆ' },
            { id: 'N_SP_SETUP', label: 'åˆæœŸè¨­å®š', sublabel: 'æ–°è¦ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—', price: 10000, choiceGroup: 'SP_SETUP', isSupported: true },
            { id: 'N_SP_APP_1', label: 'ã‚¢ãƒ—ãƒªã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆ1ä»¶ï¼‰', sublabel: 'ã‚¢ãƒ—ãƒªå°å…¥', price: 4000, choiceGroup: 'SP_APP_NT_COUNT', isSupported: true },
            { id: 'N_SP_APP_2', label: 'ã‚¢ãƒ—ãƒªã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆ2ä»¶ï¼‰', sublabel: 'ã‚¢ãƒ—ãƒªå°å…¥', price: 7000, choiceGroup: 'SP_APP_NT_COUNT', isSupported: true },
            { id: 'N_SP_APP_3', label: 'ã‚¢ãƒ—ãƒªã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆ3ä»¶ï¼‰', sublabel: 'ã‚¢ãƒ—ãƒªå°å…¥', price: 7000, choiceGroup: 'SP_APP_NT_COUNT', isSupported: true },
          ],
          NW: [
            { id: 'N_NW_SELECT', label: 'å•†å“é¸å®š', sublabel: 'ãƒ«ãƒ¼ã‚¿ãƒ¼é¸ã³ã‚µãƒãƒ¼ãƒˆ', price: 6000, choiceGroup: 'SELECT_PROD', isSupported: true, note: 'æ‰±ã„ãªã„å ´åˆ' },
            { id: 'N_NW_EXPAND', label: 'ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ‹¡å¼µ', sublabel: 'ä¸­ç¶™å™¨ãƒ»ãƒ¡ãƒƒã‚·ãƒ¥ç­‰', price: 10000, choiceGroup: 'NW_HW_EXPAND', isSupported: true },
            { id: 'N_NW_WIFI', label: 'ç„¡ç·šåŒ–', sublabel: 'Wi-Fiå°å…¥', price: 10000, choiceGroup: 'NW_SW_WIFI', isSupported: true },
            { id: 'N_NW_SETUP', label: 'åˆæœŸè¨­å®š', sublabel: 'ãƒ«ãƒ¼ã‚¿ãƒ¼è¨­å®š', price: 10000, choiceGroup: 'NW_SW_SETUP', isSupported: true },
            { id: 'N_NW_SEGMENT', label: 'ã‚»ã‚°ãƒ¡ãƒ³ãƒˆåˆ‡ã‚Š', sublabel: 'ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯åˆ†é›¢', price: 10000, choiceGroup: 'NW_SW_SEGMENT', isSupported: true },
            { id: 'N_NW_FW_UPDATE', label: 'ãƒ•ã‚¡ãƒ¼ãƒ ã‚¦ã‚§ã‚¢æ›´æ–°', sublabel: 'ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆä½œæ¥­', price: 10000, choiceGroup: 'NW_SW_FW', isSupported: true },
          ],
          PR: [
            { id: 'N_PR_SELECT', label: 'å•†å“é¸å®š', sublabel: 'ãƒ—ãƒªãƒ³ã‚¿é¸ã³ã‚µãƒãƒ¼ãƒˆ', price: 6000, choiceGroup: 'SELECT_PROD', isSupported: true, note: 'æ‰±ã„ãªã„å ´åˆ' },
            { id: 'N_PR_DRIVER', label: 'ãƒ‰ãƒ©ã‚¤ãƒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«', sublabel: 'ãƒ‰ãƒ©ã‚¤ãƒå°å…¥', price: 8000, choiceGroup: 'PR_DRIVER_INSTALL', isSupported: true },
          ],
          DATA: [],
          OTHER: [
            { id: 'N_SELECT_PRODUCT', label: 'å•†å“é¸å®šï¼ˆãã®ä»–ï¼‰', sublabel: 'æ©Ÿå™¨é¸ã³ã‚µãƒãƒ¼ãƒˆ', price: 6000, choiceGroup: 'SELECT_PROD', isSupported: true, note: 'æ‰±ã„ãªã„å ´åˆ' },
            { id: 'N_TRAIN_60', label: 'æ“ä½œæŒ‡å°ï¼ˆ60åˆ†ï¼‰', sublabel: 'ä½¿ã„æ–¹ãƒ¬ã‚¯ãƒãƒ£ãƒ¼', price: 6000, choiceGroup: 'TRAIN_TIME', isSupported: true },
            { id: 'N_TRAIN_120', label: 'æ“ä½œæŒ‡å°ï¼ˆ120åˆ†ä»¥ä¸Šï¼‰', sublabel: 'ä½¿ã„æ–¹ãƒ¬ã‚¯ãƒãƒ£ãƒ¼', price: 10000, choiceGroup: 'TRAIN_TIME', isSupported: true },
          ],
        },

        // ========== Optionï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰ ==========
        options: [
          { id: 'O_BACKUP_0_50', label: 'ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ— 0ã€œ50GB', sublabel: 'ãƒ‡ãƒ¼ã‚¿ä¿å­˜', price: 10000, choiceGroup: 'BACKUP_GB', isSupported: true },
          { id: 'O_BACKUP_50_100', label: 'ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ— 50ã€œ100GB', sublabel: 'ãƒ‡ãƒ¼ã‚¿ä¿å­˜', price: 15000, choiceGroup: 'BACKUP_GB', isSupported: true },
          { id: 'O_BACKUP_100_200', label: 'ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ— 100ã€œ200GB', sublabel: 'ãƒ‡ãƒ¼ã‚¿ä¿å­˜', price: 20000, choiceGroup: 'BACKUP_GB', isSupported: true },
          { id: 'O_EXTRACT_INSPECT', label: 'ãƒ‡ãƒ¼ã‚¿å–ã‚Šå‡ºã—æ¤œæŸ»', sublabel: 'çŠ¶æ…‹ç¢ºèª', price: 3000, choiceGroup: 'EXTRACT_INSPECTION', isSupported: true },
          { id: 'O_EXTRACT_0_50', label: 'ãƒ‡ãƒ¼ã‚¿å–ã‚Šå‡ºã— 0ã€œ50GB', sublabel: 'PCãŠé ã‹ã‚Š', price: 25000, choiceGroup: 'EXTRACT_GB', isSupported: true, note: '+æ¤œæŸ»3,000å††', requiresRevisit: true },
          { id: 'O_EXTRACT_50_100', label: 'ãƒ‡ãƒ¼ã‚¿å–ã‚Šå‡ºã— 50ã€œ100GB', sublabel: 'PCãŠé ã‹ã‚Š', price: 45000, choiceGroup: 'EXTRACT_GB', isSupported: true, note: '+æ¤œæŸ»3,000å††', requiresRevisit: true },
          { id: 'O_EXTRACT_100_200', label: 'ãƒ‡ãƒ¼ã‚¿å–ã‚Šå‡ºã— 100ã€œ200GB', sublabel: 'PCãŠé ã‹ã‚Š', price: 65000, choiceGroup: 'EXTRACT_GB', isSupported: true, note: '+æ¤œæŸ»3,000å††', requiresRevisit: true },
        ],
      },
    };

    // ============================================
    // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ä»˜ãé‡‘é¡è¡¨ç¤ºã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
    // ============================================
    const AnimatedPrice = ({ value, className = '' }) => {
      const [displayValue, setDisplayValue] = useState(value);
      const prevValue = useRef(value);

      useEffect(() => {
        if (prevValue.current === value) return;

        const start = prevValue.current;
        const end = value;
        const duration = 400;
        const startTime = Date.now();

        const animate = () => {
          const elapsed = Date.now() - startTime;
          const progress = Math.min(elapsed / duration, 1);
          const easeOut = 1 - Math.pow(1 - progress, 3);
          const current = Math.round(start + (end - start) * easeOut);
          setDisplayValue(current);

          if (progress < 1) {
            requestAnimationFrame(animate);
          }
        };

        requestAnimationFrame(animate);
        prevValue.current = value;
      }, [value]);

      return (
        <span className={className}>
          Â¥{displayValue.toLocaleString()}
        </span>
      );
    };

    // ============================================
    // é¸æŠã‚«ãƒ¼ãƒ‰ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
    // ============================================
    const SelectionCard = ({ item, isSelected, onSelect, disabled = false, showPrice = true }) => {
      if (disabled || !item.isSupported) {
        return (
          <div className="w-full text-left p-4 rounded-2xl border-2 border-gray-200 bg-gray-100 opacity-60 cursor-not-allowed">
            <div className="flex justify-between items-start gap-3">
              <div className="flex-1 min-w-0">
                <div className="text-lg font-semibold text-gray-400">
                  {item.icon && <span className="mr-2">{item.icon}</span>}
                  {item.label}
                </div>
                {item.sublabel && (
                  <div className="text-sm mt-1 text-gray-400">{item.sublabel}</div>
                )}
                <div className="text-xs mt-1 text-red-400 font-medium">â€»å¯¾å¿œä¸å¯</div>
              </div>
              <div className="text-right flex-shrink-0 text-gray-400">
                <div className="text-lg font-bold">ï¼</div>
              </div>
            </div>
          </div>
        );
      }

      return (
        <button
          onClick={() => onSelect(item)}
          className={`w-full text-left p-4 rounded-2xl border-2 transition-all duration-200 active:scale-98 ${
            isSelected
              ? 'border-indigo-600 bg-indigo-50 shadow-md'
              : 'border-gray-200 bg-white hover:border-indigo-300 hover:shadow-sm'
          }`}
          style={{ minHeight: '72px' }}
        >
          <div className="flex justify-between items-start gap-3">
            <div className="flex-1 min-w-0">
              <div className={`text-lg font-semibold ${isSelected ? 'text-indigo-900' : 'text-gray-800'}`}>
                {item.icon && <span className="mr-2">{item.icon}</span>}
                {item.label}
              </div>
              {item.sublabel && (
                <div className={`text-sm mt-1 ${isSelected ? 'text-indigo-600' : 'text-gray-500'}`}>
                  {item.sublabel}
                </div>
              )}
              {item.note && (
                <div className="text-xs mt-1 text-amber-600 font-medium">â€»{item.note}</div>
              )}
              {item.requiresRevisit && (
                <div className="text-xs mt-1 text-blue-600 font-medium">ğŸ”„ å†è¨ªå•è²»ãŒåŠ ç®—ã•ã‚Œã¾ã™</div>
              )}
            </div>
            {showPrice && (
              <div className={`text-right flex-shrink-0 ${isSelected ? 'text-indigo-700' : 'text-gray-700'}`}>
                <div className="text-lg font-bold">
                  {item.price === 0 ? 'Â¥0' : `Â¥${item.price.toLocaleString()}`}
                </div>
              </div>
            )}
          </div>
        </button>
      );
    };

    // ============================================
    // ãƒ‡ãƒã‚¤ã‚¹é¸æŠã‚«ãƒ¼ãƒ‰
    // ============================================
    const DeviceCard = ({ device, isSelected, onToggle, hasItems }) => {
      return (
        <button
          onClick={() => onToggle(device.id)}
          disabled={!hasItems}
          className={`p-5 rounded-2xl border-2 transition-all duration-200 active:scale-95 ${
            !hasItems
              ? 'border-gray-200 bg-gray-100 opacity-50 cursor-not-allowed'
              : isSelected
              ? 'border-indigo-600 bg-indigo-50 shadow-md'
              : 'border-gray-200 bg-white hover:border-indigo-300 hover:shadow-sm'
          }`}
        >
          <div className="text-3xl mb-2">{device.icon}</div>
          <div className={`font-semibold text-sm ${
            !hasItems ? 'text-gray-400' : isSelected ? 'text-indigo-900' : 'text-gray-800'
          }`}>
            {device.label}
          </div>
          {isSelected && (
            <div className="mt-2">
              <svg className="w-5 h-5 text-indigo-600 mx-auto" fill="currentColor" viewBox="0 0 20 20">
                <path fillRule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clipRule="evenodd" />
              </svg>
            </div>
          )}
        </button>
      );
    };

    // ============================================
    // ã‚¹ãƒ†ãƒƒãƒ—ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼
    // ============================================
    const StepIndicator = ({ currentStep, totalSteps }) => {
      return (
        <div className="flex justify-center gap-2 py-4">
          {Array.from({ length: totalSteps }, (_, i) => (
            <div
              key={i}
              className={`h-2 rounded-full transition-all duration-300 ${
                i + 1 === currentStep
                  ? 'w-8 bg-indigo-600'
                  : i + 1 < currentStep
                  ? 'w-2 bg-indigo-400'
                  : 'w-2 bg-gray-300'
              }`}
            />
          ))}
        </div>
      );
    };

    // ============================================
    // ãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³
    // ============================================
    function App() {
      const [step, setStep] = useState(1);
      const [selectedTravelBand, setSelectedTravelBand] = useState(null);
      const [isTrouble, setIsTrouble] = useState(null);
      const [selectedDevices, setSelectedDevices] = useState([]);
      const [selectedWorks, setSelectedWorks] = useState({});
      const [selectedOptions, setSelectedOptions] = useState({});
      const [copySuccess, setCopySuccess] = useState(false);

      const totalSteps = 6;

      // å†è¨ªå•ãŒå¿…è¦ã‹ã©ã†ã‹ã‚’åˆ¤å®š
      const needsRevisit = () => {
        const allSelected = { ...selectedWorks, ...selectedOptions };
        return Object.values(allSelected).some(item => item?.requiresRevisit);
      };

      // åˆè¨ˆé‡‘é¡ã®è¨ˆç®—
      const calculateTotal = () => {
        let total = 0;
        let breakdown = {
          travel: 0,
          revisit: 0,
          works: [],
          options: [],
        };

        if (selectedTravelBand) {
          breakdown.travel = selectedTravelBand.price;
          total += selectedTravelBand.price;
        }

        if (needsRevisit() && selectedTravelBand) {
          breakdown.revisit = selectedTravelBand.revisit;
          total += selectedTravelBand.revisit;
        }

        Object.values(selectedWorks).forEach(item => {
          if (item) {
            breakdown.works.push(item);
            total += item.price;
          }
        });

        Object.values(selectedOptions).forEach(item => {
          if (item) {
            breakdown.options.push(item);
            total += item.price;
          }
        });

        return { total, breakdown };
      };

      const { total, breakdown } = calculateTotal();

      // ãƒ‡ãƒã‚¤ã‚¹é¸æŠã®ãƒˆã‚°ãƒ«
      const toggleDevice = (deviceId) => {
        setSelectedDevices(prev => {
          const isCurrentlySelected = prev.includes(deviceId);
          if (isCurrentlySelected) {
            const newWorks = { ...selectedWorks };
            Object.keys(newWorks).forEach(key => {
              if (deviceId === 'DATA' && key.startsWith('T_DATA')) {
                delete newWorks[key];
              }
            });
            setSelectedWorks(newWorks);
            return prev.filter(id => id !== deviceId);
          } else {
            if (deviceId === 'DATA') {
              const inspectItem = PRICE_DATA.menu.trouble.DATA.find(item => item.id === 'T_DATA_INSPECT');
              if (inspectItem) {
                setSelectedWorks(prevWorks => ({
                  ...prevWorks,
                  [inspectItem.id]: inspectItem
                }));
              }
            }
            return [...prev, deviceId];
          }
        });
      };

      // ä½œæ¥­é¸æŠ
      const selectWork = (item) => {
        if (item.id === 'T_DATA_INSPECT' && selectedWorks[item.id]) {
          return;
        }
        
        setSelectedWorks(prev => {
          const newWorks = { ...prev };
          Object.keys(newWorks).forEach(key => {
            if (newWorks[key]?.choiceGroup === item.choiceGroup) {
              delete newWorks[key];
            }
          });
          if (prev[item.id] && item.id !== 'T_DATA_INSPECT') {
            delete newWorks[item.id];
          } else {
            newWorks[item.id] = item;
          }
          return newWorks;
        });
      };

      // ã‚ªãƒ—ã‚·ãƒ§ãƒ³é¸æŠ
      const selectOption = (item) => {
        setSelectedOptions(prev => {
          const newOptions = { ...prev };
          Object.keys(newOptions).forEach(key => {
            if (newOptions[key]?.choiceGroup === item.choiceGroup) {
              delete newOptions[key];
            }
          });
          if (prev[item.id]) {
            delete newOptions[item.id];
          } else {
            newOptions[item.id] = item;
          }
          return newOptions;
        });
      };

      const getCurrentMenu = () => {
        return isTrouble ? PRICE_DATA.menu.trouble : PRICE_DATA.menu.notTrouble;
      };

      const nextStep = () => {
        if (step < totalSteps) setStep(step + 1);
      };

      const prevStep = () => {
        if (step > 1) setStep(step - 1);
      };

      const reset = () => {
        setStep(1);
        setSelectedTravelBand(null);
        setIsTrouble(null);
        setSelectedDevices([]);
        setSelectedWorks({});
        setSelectedOptions({});
        setCopySuccess(false);
      };

      // ãƒ†ã‚­ã‚¹ãƒˆã§ã‚³ãƒ”ãƒ¼
      const copyToClipboard = () => {
        const now = new Date();
        const dateStr = `${now.getFullYear()}å¹´${now.getMonth() + 1}æœˆ${now.getDate()}æ—¥`;

        let text = `â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ã€€ãŠè¦‹ç©æ›¸
ã€€ITãƒ©ã‚¤ãƒ•ãƒ¯ãƒ¼ã‚¯ãƒ‡ã‚¶ã‚¤ãƒ³
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ä½œæˆæ—¥: ${dateStr}

ã€å†…è¨³ã€‘
`;
        if (selectedTravelBand) {
          text += `â–  å‡ºå¼µè²»ï¼ˆ${selectedTravelBand.label}ï¼‰\n`;
          text += `ã€€ Â¥${selectedTravelBand.price.toLocaleString()}\n`;
        }

        if (needsRevisit() && selectedTravelBand) {
          text += `â–  å†è¨ªå•è²»ï¼ˆ${selectedTravelBand.label}ï¼‰\n`;
          text += `ã€€ Â¥${selectedTravelBand.revisit.toLocaleString()}\n`;
        }

        if (breakdown.works.length > 0) {
          text += `â–  ä½œæ¥­å†…å®¹:\n`;
          breakdown.works.forEach(item => {
            text += `ã€€ãƒ»${item.label}: Â¥${item.price.toLocaleString()}`;
            if (item.note) text += ` (${item.note})`;
            text += '\n';
          });
        }

        if (breakdown.options.length > 0) {
          text += `â–  ã‚ªãƒ—ã‚·ãƒ§ãƒ³:\n`;
          breakdown.options.forEach(item => {
            text += `ã€€ãƒ»${item.label}: Â¥${item.price.toLocaleString()}`;
            if (item.note) text += ` (${item.note})`;
            text += '\n';
          });
        }

        text += `
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ã€€åˆè¨ˆé‡‘é¡: Â¥${total.toLocaleString()}ï¼ˆç¨è¾¼ï¼‰
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

â€» éƒ¨å“ä»£ãƒ»ç‰¹æ®Šä½œæ¥­ã¯åˆ¥é€”ã”ç›¸è«‡
â€» ä½œæ¥­å®Œäº†å¾Œã®ãŠæ”¯æ‰•ã„ã¨ãªã‚Šã¾ã™
`;

        navigator.clipboard.writeText(text).then(() => {
          setCopySuccess(true);
          setTimeout(() => setCopySuccess(false), 2500);
        }).catch(() => {
          // ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼šãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒªã‚¢ã‚’ä½¿ç”¨
          const textarea = document.createElement('textarea');
          textarea.value = text;
          document.body.appendChild(textarea);
          textarea.select();
          document.execCommand('copy');
          document.body.removeChild(textarea);
          setCopySuccess(true);
          setTimeout(() => setCopySuccess(false), 2500);
        });
      };

      const canProceed = () => {
        switch (step) {
          case 1: return selectedTravelBand !== null;
          case 2: return isTrouble !== null;
          case 3: return selectedDevices.length > 0;
          case 4: return Object.keys(selectedWorks).length > 0;
          case 5: return true;
          default: return true;
        }
      };

      return (
        <div className="min-h-screen bg-gradient-to-b from-slate-50 to-slate-100">
          {/* ãƒ˜ãƒƒãƒ€ãƒ¼ */}
          <header className="bg-gradient-to-r from-indigo-900 to-indigo-800 text-white px-4 py-5 shadow-lg sticky top-0 z-50">
            <div className="max-w-lg mx-auto">
              <h1 className="text-lg font-bold tracking-wide text-center">
                ITãƒ©ã‚¤ãƒ•ãƒ¯ãƒ¼ã‚¯ãƒ‡ã‚¶ã‚¤ãƒ³
              </h1>
              <p className="text-indigo-200 text-sm text-center mt-1">ãŠè¦‹ç©ã‚Šã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼</p>
            </div>
          </header>

          {/* åˆè¨ˆé‡‘é¡ãƒãƒ¼ */}
          <div className="bg-white border-b border-gray-200 px-4 py-4 shadow-sm sticky top-[76px] z-40">
            <div className="max-w-lg mx-auto flex justify-between items-center">
              <div>
                <span className="text-gray-600 font-medium">åˆè¨ˆé‡‘é¡</span>
                {needsRevisit() && (
                  <span className="ml-2 text-xs bg-blue-100 text-blue-700 px-2 py-0.5 rounded-full">
                    å†è¨ªå•è²»è¾¼
                  </span>
                )}
              </div>
              <AnimatedPrice
                value={total}
                className="text-3xl font-bold text-indigo-900"
              />
            </div>
          </div>

          {/* ã‚¹ãƒ†ãƒƒãƒ—ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼ */}
          <div className="max-w-lg mx-auto">
            <StepIndicator currentStep={step} totalSteps={totalSteps} />
          </div>

          {/* ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ */}
          <main className="max-w-lg mx-auto px-4 pb-32">
            {/* Step 1: å‡ºå¼µã‚¨ãƒªã‚¢ */}
            {step === 1 && (
              <div className="space-y-4">
                <div className="mb-6">
                  <h2 className="text-xl font-bold text-gray-900">å‡ºå¼µã‚¨ãƒªã‚¢</h2>
                  <p className="text-gray-500 text-sm mt-1">ã”è¨ªå•å…ˆã‚’ãŠé¸ã³ãã ã•ã„</p>
                </div>
                <div className="space-y-3">
                  {PRICE_DATA.travel.bands.map(band => (
                    <SelectionCard
                      key={band.id}
                      item={{
                        ...band,
                        isSupported: true,
                      }}
                      isSelected={selectedTravelBand?.id === band.id}
                      onSelect={() => setSelectedTravelBand(band)}
                    />
                  ))}
                </div>
              </div>
            )}

            {/* Step 2: ãƒˆãƒ©ãƒ–ãƒ« or é€šå¸¸ä½œæ¥­ */}
            {step === 2 && (
              <div className="space-y-4">
                <div className="mb-6">
                  <h2 className="text-xl font-bold text-gray-900">ã”ä¾é ¼å†…å®¹</h2>
                  <p className="text-gray-500 text-sm mt-1">ã©ã¡ã‚‰ã«è©²å½“ã—ã¾ã™ã‹ï¼Ÿ</p>
                </div>
                <div className="space-y-3">
                  <SelectionCard
                    item={{
                      id: 'trouble',
                      label: 'ãƒˆãƒ©ãƒ–ãƒ«å¯¾å¿œ',
                      sublabel: 'å‹•ã‹ãªã„ãƒ»ãŠã‹ã—ã„ç­‰ã®å•é¡Œè§£æ±º',
                      icon: 'ğŸ”§',
                      price: null,
                      isSupported: true,
                    }}
                    isSelected={isTrouble === true}
                    onSelect={() => {
                      setIsTrouble(true);
                      setSelectedDevices([]);
                      setSelectedWorks({});
                    }}
                    showPrice={false}
                  />
                  <SelectionCard
                    item={{
                      id: 'notTrouble',
                      label: 'è¨­å®šãƒ»å°å…¥ãƒ»ç›¸è«‡',
                      sublabel: 'æ–°è¦ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ãƒ»ä½¿ã„æ–¹ãªã©',
                      icon: 'âœ¨',
                      price: null,
                      isSupported: true,
                    }}
                    isSelected={isTrouble === false}
                    onSelect={() => {
                      setIsTrouble(false);
                      setSelectedDevices([]);
                      setSelectedWorks({});
                    }}
                    showPrice={false}
                  />
                </div>
              </div>
            )}

            {/* Step 3: ãƒ‡ãƒã‚¤ã‚¹é¸æŠ */}
            {step === 3 && (
              <div className="space-y-4">
                <div className="mb-6">
                  <h2 className="text-xl font-bold text-gray-900">å¯¾è±¡æ©Ÿå™¨</h2>
                  <p className="text-gray-500 text-sm mt-1">è©²å½“ã™ã‚‹ã‚‚ã®ã‚’ã™ã¹ã¦ãŠé¸ã³ãã ã•ã„ï¼ˆè¤‡æ•°å¯ï¼‰</p>
                </div>
                <div className="grid grid-cols-2 gap-3">
                  {PRICE_DATA.devices.map(device => {
                    const menu = getCurrentMenu();
                    const hasItems = menu[device.id] && menu[device.id].length > 0;
                    return (
                      <DeviceCard
                        key={device.id}
                        device={device}
                        isSelected={selectedDevices.includes(device.id)}
                        onToggle={toggleDevice}
                        hasItems={hasItems}
                      />
                    );
                  })}
                </div>
                {selectedDevices.length > 0 && (
                  <div className="mt-4 p-3 bg-indigo-50 rounded-xl">
                    <p className="text-sm text-indigo-700">
                      <span className="font-semibold">{selectedDevices.length}ä»¶</span>é¸æŠä¸­
                    </p>
                  </div>
                )}
              </div>
            )}

            {/* Step 4: ä½œæ¥­å†…å®¹é¸æŠ */}
            {step === 4 && (
              <div className="space-y-6">
                <div className="mb-4">
                  <h2 className="text-xl font-bold text-gray-900">ä½œæ¥­å†…å®¹</h2>
                  <p className="text-gray-500 text-sm mt-1">å„æ©Ÿå™¨ã®ä½œæ¥­ã‚’ãŠé¸ã³ãã ã•ã„</p>
                </div>
                {selectedDevices.map(deviceId => {
                  const device = PRICE_DATA.devices.find(d => d.id === deviceId);
                  const menu = getCurrentMenu();
                  const items = menu[deviceId] || [];

                  if (items.length === 0) return null;

                  const groups = {};
                  items.forEach(item => {
                    if (!groups[item.choiceGroup]) {
                      groups[item.choiceGroup] = [];
                    }
                    groups[item.choiceGroup].push(item);
                  });

                  return (
                    <div key={deviceId} className="space-y-3">
                      <div className="flex items-center gap-2 pb-2 border-b border-gray-200">
                        <span className="text-2xl">{device.icon}</span>
                        <h3 className="text-lg font-bold text-gray-800">{device.label}</h3>
                      </div>
                      {Object.entries(groups).map(([groupId, groupItems]) => (
                        <div key={groupId} className="space-y-2">
                          {groupItems.map(item => (
                            <SelectionCard
                              key={item.id}
                              item={item}
                              isSelected={!!selectedWorks[item.id]}
                              onSelect={selectWork}
                            />
                          ))}
                        </div>
                      ))}
                    </div>
                  );
                })}
              </div>
            )}

            {/* Step 5: ã‚ªãƒ—ã‚·ãƒ§ãƒ³ */}
            {step === 5 && (
              <div className="space-y-4">
                <div className="mb-6">
                  <h2 className="text-xl font-bold text-gray-900">ã‚ªãƒ—ã‚·ãƒ§ãƒ³</h2>
                  <p className="text-gray-500 text-sm mt-1">è¿½åŠ ä½œæ¥­ãŒã‚ã‚Œã°ãŠé¸ã³ãã ã•ã„ï¼ˆä»»æ„ï¼‰</p>
                </div>
                <div className="space-y-3">
                  {PRICE_DATA.menu.options
                    .filter(item => {
                      if (selectedDevices.includes('DATA')) {
                        const dataRelatedGroups = ['BACKUP_GB', 'EXTRACT_GB', 'EXTRACT_INSPECTION'];
                        if (dataRelatedGroups.includes(item.choiceGroup)) {
                          return false;
                        }
                      }
                      return true;
                    })
                    .map(item => (
                    <SelectionCard
                      key={item.id}
                      item={item}
                      isSelected={!!selectedOptions[item.id]}
                      onSelect={selectOption}
                    />
                  ))}
                  {selectedDevices.includes('DATA') && (
                    <div className="p-4 bg-blue-50 rounded-xl border border-blue-200">
                      <p className="text-sm text-blue-700">
                        ğŸ’¡ ãƒ‡ãƒ¼ã‚¿å¾©æ—§é–¢é€£ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯ã€ä½œæ¥­å†…å®¹ã§é¸æŠæ¸ˆã¿ã®ãŸã‚è¡¨ç¤ºã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚
                      </p>
                    </div>
                  )}
                </div>
              </div>
            )}

            {/* Step 6: ç¢ºèªç”»é¢ */}
            {step === 6 && (
              <div className="space-y-6">
                <div className="bg-white rounded-2xl border-2 border-indigo-100 p-5 shadow-sm">
                  <h3 className="font-bold text-gray-900 mb-4 flex items-center gap-2">
                    <svg className="w-5 h-5 text-indigo-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                    </svg>
                    ãŠè¦‹ç©ã‚Šå†…å®¹
                  </h3>
                  <div className="space-y-3 text-sm">
                    {selectedTravelBand && (
                      <div className="flex justify-between py-2 border-b border-gray-100">
                        <span className="text-gray-600">å‡ºå¼µè²»</span>
                        <div className="text-right">
                          <div className="font-medium text-gray-900">{selectedTravelBand.label}</div>
                          <div className="text-indigo-600">Â¥{selectedTravelBand.price.toLocaleString()}</div>
                        </div>
                      </div>
                    )}

                    {needsRevisit() && selectedTravelBand && (
                      <div className="flex justify-between py-2 border-b border-gray-100 bg-blue-50 -mx-2 px-2 rounded">
                        <span className="text-blue-700">ğŸ”„ å†è¨ªå•è²»</span>
                        <div className="text-right">
                          <div className="font-medium text-blue-900">{selectedTravelBand.label}</div>
                          <div className="text-blue-600">Â¥{selectedTravelBand.revisit.toLocaleString()}</div>
                        </div>
                      </div>
                    )}

                    {breakdown.works.length > 0 && (
                      <div className="py-2 border-b border-gray-100">
                        <span className="text-gray-600 font-medium">ä½œæ¥­å†…å®¹</span>
                        <div className="mt-2 space-y-2">
                          {breakdown.works.map(item => (
                            <div key={item.id} className="flex justify-between text-sm">
                              <div>
                                <span className="text-gray-700">{item.label}</span>
                                {item.note && (
                                  <span className="text-amber-600 text-xs ml-1">({item.note})</span>
                                )}
                              </div>
                              <span className="text-indigo-600 font-medium">Â¥{item.price.toLocaleString()}</span>
                            </div>
                          ))}
                        </div>
                      </div>
                    )}

                    {breakdown.options.length > 0 && (
                      <div className="py-2 border-b border-gray-100">
                        <span className="text-gray-600 font-medium">ã‚ªãƒ—ã‚·ãƒ§ãƒ³</span>
                        <div className="mt-2 space-y-2">
                          {breakdown.options.map(item => (
                            <div key={item.id} className="flex justify-between text-sm">
                              <div>
                                <span className="text-gray-700">{item.label}</span>
                                {item.note && (
                                  <span className="text-amber-600 text-xs ml-1">({item.note})</span>
                                )}
                              </div>
                              <span className="text-indigo-600 font-medium">Â¥{item.price.toLocaleString()}</span>
                            </div>
                          ))}
                        </div>
                      </div>
                    )}
                  </div>

                  <div className="mt-4 pt-4 border-t-2 border-indigo-200">
                    <div className="flex justify-between items-center">
                      <span className="text-lg font-bold text-gray-900">åˆè¨ˆé‡‘é¡</span>
                      <span className="text-2xl font-bold text-indigo-900">
                        Â¥{total.toLocaleString()}
                      </span>
                    </div>
                    <p className="text-xs text-gray-500 mt-1 text-right">ç¨è¾¼</p>
                  </div>
                </div>

                <button
                  onClick={copyToClipboard}
                  className={`w-full py-4 rounded-2xl font-bold text-lg transition-all duration-200 flex items-center justify-center gap-2 ${
                    copySuccess
                      ? 'bg-green-500 text-white'
                      : 'bg-indigo-100 text-indigo-700 hover:bg-indigo-200 active:scale-98'
                  }`}
                >
                  {copySuccess ? (
                    <>
                      <svg className="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 13l4 4L19 7" />
                      </svg>
                      ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼
                    </>
                  ) : (
                    <>
                      <svg className="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3" />
                      </svg>
                      è¦‹ç©ã‚‚ã‚Šã‚’ãƒ†ã‚­ã‚¹ãƒˆã§ã‚³ãƒ”ãƒ¼
                    </>
                  )}
                </button>
              </div>
            )}
          </main>

          {/* ãƒ•ãƒƒã‚¿ãƒ¼ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ */}
          <footer className="fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 px-4 py-4 shadow-lg">
            <div className="max-w-lg mx-auto flex gap-3">
              {step > 1 && (
                <button
                  onClick={prevStep}
                  className="flex-1 py-4 rounded-2xl border-2 border-gray-300 text-gray-700 font-bold text-lg hover:bg-gray-50 active:scale-98 transition-all"
                >
                  æˆ»ã‚‹
                </button>
              )}
              {step < totalSteps ? (
                <button
                  onClick={nextStep}
                  disabled={!canProceed()}
                  className={`flex-1 py-4 rounded-2xl font-bold text-lg transition-all ${
                    canProceed()
                      ? 'bg-indigo-600 text-white hover:bg-indigo-700 active:scale-98 shadow-md'
                      : 'bg-gray-200 text-gray-400 cursor-not-allowed'
                  }`}
                >
                  æ¬¡ã¸
                </button>
              ) : (
                <button
                  onClick={reset}
                  className="flex-1 py-4 rounded-2xl bg-gray-800 text-white font-bold text-lg hover:bg-gray-900 active:scale-98 transition-all shadow-md"
                >
                  æœ€åˆã‹ã‚‰ã‚„ã‚Šç›´ã™
                </button>
              )}
            </div>
          </footer>
        </div>
      );
    }

    // ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App />);
  </script>
</body>
</html>
